<nav class="navbar navbar-dark bg-dark">
  <div class="flex-even">
    <LinkTo @route="index" @tagName="button" type="button" @class="btn btn-outline-light">
      Back
    </LinkTo>
  </div>
  <span class="navbar-brand d-flex flex-even justify-content-center">Eat in</span>
  <div class="dropdown flex-even d-flex justify-content-end">
    <button class="btn btn-outline-light dropdown-toggle" type="button" id="order-summary-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Summary
    </button>
    <div class="dropdown-menu dropdown-menu-right px-3 text-nowrap" aria-labelledby="order-summary-btn">
      <div class="d-flex">
        <div class="d-flex flex-column">
          <div class="mr-3">Cash</div>
          <div class="mr-3">Card</div>
          <div class="mr-3">Online</div>
          <div class="mr-3">Not paid</div>
          <hr class="w-100">
          <div class="mr-3">Total</div>
        </div>
        <div class="d-flex flex-column align-items-end">
          <div class="mr-3">{{this.cashOrders.length}}</div>
          <div class="mr-3">{{this.cardOrders.length}}</div>
          <div class="mr-3">{{this.onlinePaymentOrders.length}}</div>
          <div class="mr-3">{{this.notPaidOrders.length}}</div>
          <hr class="w-100">
          <div class="mr-3">{{this.model.length}}</div>
        </div>
        <div class="d-flex flex-column align-items-end">
          <div>{{format-currency this.totalCash}}</div>
          <div>{{format-currency this.totalCard}}</div>
          <div>{{format-currency this.totalOnlinePayment}}</div>
          <div>{{format-currency this.totalNotPaid}}</div>
          <hr class="w-100">
          <div>{{format-currency this.totalAll}}</div>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container-fluid">
  {{#if this.ordersByTimestamp}}
    <div class="row mt-3">
      <div class="col">
        {{#each this.ordersByTimestamp as |order|}}
          <Order::EatInCard @order={{order}} @onPrintOrder={{this.printOrder}} />
        {{/each}}
      </div>
    </div>
  {{else}}
    <div class="mt-5 text-center text-muted">
      No orders to display
    </div>
  {{/if}}
</div>

{{#if this.showOrderConfirmModal}}
  <EmberWormhole @to={{this.ui.appModalContainerId}}>
    <Modal::Base::Dialog @title="Create table"
                         @onDismiss={{this.toggleCreateModal}}
                         @onConfirm={{this.createOrder}} as |Body Footer onDismiss onConfirm|>
      <Body>
      <form novalidate>
        <Form::Group class="mb-1" @validateOnDirty={{true}} @invalidFeedback="Table name must not be empty" as |fg|>
          <label>Table name</label>
          <fg.element @value={{this.newTableName}} @pattern=".+"/>
        </Form::Group>
        <Form::Group class="mb-1" @validateOnDirty={{true}} @invalidFeedback="Must be a number" as |fg|>
          <label>Number of guests</label>
          <fg.element @value={{this.newNumberOfGuests}} @pattern="[0-9]*"/>
        </Form::Group>
      </form>
      </Body>
      <Footer>
        <button type="button" class="btn btn-main-secondary" {{on "click" onDismiss}}>
          Cancel
        </button>
        {{#if this.canCreate}}
          <button type="button" class="btn btn-success" {{on "click" onConfirm}}>
            Create
          </button>
        {{else}}
          <button type="button" class="btn btn-secondary" disabled>
            Create
          </button>
        {{/if}}
      </Footer>
    </Modal::Base::Dialog>
  </EmberWormhole>
{{/if}}

<button class="btn btn-lg btn-primary fixed-bottom-right-btn shadow mb-3 mr-3" type="button" {{on "click" this.toggleCreateModal}}>
  Create
</button>
