<div class="row">
  <div class="col-xs-11">
    <div class="row">
      <div class="col-xs-12">
        {{component (concat "order-" customerType) customer=order.customer}}
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        Â£{{format-currency order.total}}
        <button type="button" class="btn btn-default btn-expandable {{if showPaymentSelector 'expanded'}}" {{action "showPaymentSelector"}}>
          {{#if showPaymentSelector}}
            {{#if updatingPaymentMethod}}
              {{loading-spinner}}
            {{else}}
              <button type="button" class="btn btn-default" {{action "updatePayment" null bubbles=false}}>
                NOT PAID
              </button>
              <button type="button" class="btn btn-default" {{action "updatePayment" "CASH" bubbles=false}}>
                CASH
              </button>
              <button type="button" class="btn btn-default" {{action "updatePayment" "CARD" bubbles=false}}>
                CARD
              </button>
              <button type="button" class="btn btn-default" {{action "updatePayment" "ONLINE" bubbles=false}}>
                ONLINE
              </button>
              <button type="button" class="btn btn-default" {{action "hidePaymentSelector" bubbles=false}}>
                CANCEL
              </button>
            {{/if}}
          {{else}}
            {{format-payment-method order.paymentMethod}}
          {{/if}}
        </button>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        Ordered at {{format-date-time order.dateTime}}
      </div>
    </div>
  </div>

  <div class="col-xs-1">
    <div class="btn-group pull-right">
      {{#btn/btn-default class="btn-default btn-order-actions dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"}}
        <span class="glyphicon glyphicon-option-vertical"></span>
      {{/btn/btn-default}}
      <ul class="dropdown-menu dropdown-menu-right">
        <li><a {{action "printOrderAsEatIn"}}>Print small copy</a></li>
        <li><a {{action "printOrderAsDelivery"}}>Print large copy</a></li>
        <li role="separator" class="divider"></li>
        <li><a {{action "editOrder"}}>Edit order</a></li>
      </ul>
    </div>
  </div>
</div>

{{#liquid-if showOrderItems class="toDown-toUp"}}
  {{#if order.notes}}
    <div class="row gutter-top-bottom">
      <div class="col-xs-12">
        {{order.notes}}
      </div>
    </div>
  {{/if}}
  <div class="row gutter-top-bottom">
    <div class="col-xs-12">
      <ul class="list-group">
        {{#each order.orderItems as |orderItem|}}
          <li class="list-group-item">
            {{orderItem.quantity}} x {{orderItem.menuItem.menuId}} {{orderItem.menuItem.name}}
            {{#each orderItem.editOptions as |editOption|}}
              <div>{{editOption.name}}</div>
            {{/each}}
          </li>
        {{/each}}
      </ul>
    </div>
  </div>
{{/liquid-if}}

<div class="row gutter-top-bottom">
  <div class="col-xs-12">
    {{#btn/btn-default class="btn-default btn-lg btn-block" action="toggleShowOrderItems"}}
      {{#if showOrderItems}}
        <span class="glyphicon glyphicon-chevron-up"></span>
      {{else}}
        <span class="glyphicon glyphicon-chevron-down"></span>
      {{/if}}
    {{/btn/btn-default}}
  </div>
</div>
